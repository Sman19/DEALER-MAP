// Load CSV: expected headers: name,state,dealer_code,phone,lat,lng
Papa.parse('bmw_dealers.csv', {
  download: true,
  header: true,
  skipEmptyLines: true,
  complete: function(results) {
    const rows = results.data;
    rows.forEach(r => {
      const name = r.name || '';
      const state = r.state || '';
      const code = r.dealer_code || '';
      const phone = r.phone || '';
      const lat = parseFloat(r.lat);
      const lng = parseFloat(r.lng);
      if (!name || isNaN(lat) || isNaN(lng)) return;
      addPoint(lat, lng, name, state, code, phone);
    });
    renderMarkers();
    map.fitBounds(bounds.pad(0.2));
  }
});
